<section aria-label="Scopri i Parchi nazionali e le Aree protette della Calabria">
  @for (park of parks; track park.id) {
    <div class="home-component">
      <img [src]="park.imageUrl" [alt]="GlobalHandler.getInstance().isItalian() ? park.name : park.englishName">
      <div class="details">
        <h1>{{ GlobalHandler.getInstance().isItalian() ? park.name : park.englishName }}</h1>
        <button (click)="navigateToPark(park)" class="primary-button">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M17,1.25 C20.104,1.25 22.75,3.788 22.75,6.909 C22.75,8.507 22.065,9.837 21.132,10.915 C20.206,11.985 19.009,12.838 17.904,13.508 L17.892,13.515 L17.881,13.521 C17.612,13.672 17.308,13.75 17,13.75 C16.692,13.75 16.388,13.672 16.119,13.521 L16.106,13.514 L16.093,13.506 C14.993,12.832 13.797,11.981 12.87,10.914 C11.937,9.84 11.25,8.512 11.25,6.909 C11.25,3.788 13.896,1.25 17,1.25 Z M10.23,2.735 C5.962,3.602 2.75,7.376 2.75,11.899 C2.75,12.298 2.775,12.691 2.823,13.076 L2.837,13.069 C3.11,12.935 3.434,12.774 3.787,12.635 C4.173,12.483 4.608,12.672 4.76,13.057 C4.912,13.442 4.723,13.878 4.338,14.03 C4.049,14.144 3.791,14.271 3.521,14.405 C3.458,14.436 3.394,14.467 3.329,14.499 C3.266,14.53 3.201,14.551 3.135,14.563 C4.282,18.43 7.862,21.25 12.101,21.25 C14.61,21.25 16.889,20.262 18.569,18.653 C18.389,18.551 18.252,18.377 18.205,18.159 C18.117,17.754 18.374,17.355 18.779,17.267 C19.095,17.199 19.38,17.091 19.633,16.949 C19.76,16.878 19.898,16.848 20.033,16.854 C20.616,15.923 21.039,14.882 21.265,13.77 C21.347,13.364 21.743,13.102 22.149,13.184 C22.555,13.267 22.817,13.663 22.735,14.068 C21.73,19.022 17.351,22.75 12.101,22.75 C6.108,22.75 1.25,17.892 1.25,11.899 C1.25,6.649 4.978,2.271 9.932,1.265 C10.338,1.183 10.733,1.445 10.816,1.851 C10.898,2.257 10.636,2.653 10.23,2.735 Z M12.75,6.909 C12.75,8.05 13.231,9.042 14.003,9.931 C14.777,10.823 15.816,11.576 16.86,12.217 C16.903,12.238 16.951,12.25 17,12.25 C17.05,12.25 17.098,12.238 17.141,12.216 C18.184,11.583 19.224,10.828 19.998,9.933 C20.77,9.041 21.25,8.046 21.25,6.909 C21.25,4.649 19.308,2.75 17,2.75 C14.692,2.75 12.75,4.649 12.75,6.909 Z M14.75,7 C14.75,5.757 15.757,4.75 17,4.75 C18.243,4.75 19.25,5.757 19.25,7 C19.25,8.243 18.243,9.25 17,9.25 C15.757,9.25 14.75,8.243 14.75,7 Z M6.534,12.255 C7.176,12.326 7.876,12.507 8.649,12.832 C9.03,12.993 9.21,13.432 9.049,13.814 C8.888,14.196 8.448,14.375 8.067,14.215 C7.41,13.939 6.85,13.799 6.368,13.746 C5.957,13.7 5.66,13.329 5.706,12.917 C5.752,12.506 6.122,12.209 6.534,12.255 Z M14.989,16.654 C15.547,16.898 16.077,17.076 16.575,17.191 C16.978,17.285 17.229,17.688 17.136,18.091 C17.042,18.495 16.639,18.746 16.236,18.653 C15.638,18.514 15.02,18.305 14.387,18.028 C14.007,17.862 13.835,17.419 14.001,17.04 C14.167,16.66 14.609,16.488 14.989,16.654 Z M11.286,14.334 C11.495,14.481 11.709,14.641 11.915,14.794 L11.915,14.794 L11.939,14.812 C12.156,14.974 12.366,15.129 12.57,15.272 C12.909,15.509 12.993,15.976 12.755,16.316 C12.518,16.656 12.051,16.739 11.711,16.502 C11.485,16.344 11.258,16.175 11.043,16.015 L11.027,16.003 L11.027,16.003 C10.815,15.845 10.615,15.696 10.424,15.562 C10.085,15.324 10.003,14.856 10.241,14.517 C10.479,14.178 10.947,14.096 11.286,14.334 Z M17,7.75 C17.414,7.75 17.75,7.414 17.75,7 C17.75,6.586 17.414,6.25 17,6.25 C16.586,6.25 16.25,6.586 16.25,7 C16.25,7.414 16.586,7.75 17,7.75 Z"/>
          </svg>
          {{ 'DISCOVER' | translate }}
        </button>
      </div>
    </div>
  }
</section>

@if (showPopup) {
  <div class="newsletter-popup">
    <form [formGroup]="newsletterForm" (ngSubmit)="subscribeToNewsletter()" class="newsletter-form">
      <article>
        <h2>{{ 'NEWSLETTER_TITLE' | translate }}</h2>
        <p>{{ 'NEWSLETTER_PARAGRAPH_1' | translate }}</p>
      </article>
      <div class="input-group" [class.error]="isInvalid('email')">
        <label for="email">Email</label>
        <input name="email" type="email" placeholder="Email" formControlName="email" required>
        @if (isInvalid('email')) {
          <span class="error-message">{{ getErrorMessage('email') }}</span>
        }
      </div>
      <button class="primary-button" type="submit" [disabled]="newsletterForm.invalid">{{ "SUBSCRIBE" | translate}}</button>
      <svg (click)="showPopup = false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
        <path d="M12.75,22.75 C6.813,22.75 2,17.937 2,12 C2,6.063 6.813,1.25 12.75,1.25 C18.687,1.25 23.5,6.063 23.5,12 C23.5,17.937 18.687,22.75 12.75,22.75 Z M3.5,12 C3.5,17.109 7.641,21.25 12.75,21.25 C17.859,21.25 22,17.109 22,12 C22,6.891 17.859,2.75 12.75,2.75 C7.641,2.75 3.5,6.891 3.5,12 Z M10.28,8.47 L12.75,10.94 L15.22,8.47 C15.512,8.177 15.987,8.177 16.28,8.47 C16.573,8.763 16.573,9.237 16.28,9.53 L13.811,12 L16.28,14.47 C16.573,14.763 16.573,15.238 16.28,15.53 C15.987,15.823 15.512,15.823 15.219,15.53 L12.75,13.061 L10.281,15.53 C9.988,15.823 9.513,15.823 9.22,15.53 C8.927,15.238 8.927,14.763 9.22,14.47 L11.689,12 L9.22,9.53 C8.927,9.237 8.927,8.763 9.22,8.47 C9.513,8.177 9.987,8.177 10.28,8.47 Z" />
      </svg>
    </form>
  </div>
}
