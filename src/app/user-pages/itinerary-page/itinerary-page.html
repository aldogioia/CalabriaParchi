<section class="itinerary">
  <article>
    <h2>{{ 'ITINERARY_ARTICLE_TITLE' | translate }}</h2>
    <p>{{ 'ITINERARY_ARTICLE_PARAGRAPH_1' | translate }}</p>
  </article>

  <section class="my-itinerary-summary">
    <h3>{{"MY_ITINERARY_ARTICLE_TITLE" | translate}}</h3>
    <a routerLink="/my-itinerary">{{ "SELECTED_INTERESTS" | translate }} {{wishlistCount}}</a>
  </section>

  <form class="filter-form" [formGroup]="searchForm" (ngSubmit)="onSubmit()">
    <section class="control-form-section">
      <button type="button" (click)="isFilterOpen = !isFilterOpen" class="filter-button selected">
        <div style="display: flex; align-items: center; gap: 8px;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path d="M6.234,2.25 L17.818,2.25 C18.588,2.25 19.243,2.25 19.759,2.32 C20.305,2.395 20.827,2.563 21.227,3.003 C21.631,3.447 21.741,3.982 21.749,4.529 C21.757,5.04 21.676,5.675 21.58,6.415 L21.573,6.469 C21.54,6.73 21.489,6.984 21.384,7.237 C21.277,7.495 21.13,7.714 20.946,7.932 C19.967,9.096 18.145,11.199 15.581,13.114 C15.54,13.145 15.488,13.219 15.478,13.329 C15.229,16.082 15.009,17.538 14.851,18.382 C14.68,19.295 13.984,19.926 13.384,20.361 C13.07,20.589 12.737,20.794 12.44,20.974 C12.416,20.989 12.392,21.003 12.369,21.017 C12.092,21.186 11.856,21.329 11.659,21.469 C11.118,21.851 10.495,21.824 10.018,21.546 C9.568,21.284 9.252,20.806 9.188,20.266 C9.047,19.08 8.793,16.757 8.512,13.323 C8.503,13.212 8.486,13.181 8.484,13.178 C8.483,13.176 8.481,13.171 8.472,13.162 C8.463,13.152 8.444,13.134 8.408,13.107 C5.85,11.194 4.032,9.094 3.054,7.932 C2.871,7.715 2.719,7.501 2.611,7.24 C2.505,6.985 2.46,6.731 2.426,6.468 C2.424,6.45 2.422,6.433 2.42,6.415 L2.42,6.415 C2.324,5.675 2.243,5.04 2.251,4.529 C2.259,3.982 2.369,3.447 2.773,3.003 C3.173,2.563 3.695,2.395 4.241,2.32 C4.757,2.25 5.411,2.25 6.182,2.25 L6.234,2.25 Z M4.444,3.807 C4.06,3.859 3.944,3.944 3.883,4.012 C3.826,4.075 3.756,4.187 3.75,4.552 C3.744,4.942 3.81,5.468 3.914,6.277 C3.943,6.502 3.968,6.598 3.996,6.665 C4.022,6.727 4.068,6.807 4.201,6.966 C5.159,8.104 6.888,10.098 9.307,11.905 C9.501,12.051 9.679,12.231 9.808,12.473 C9.935,12.711 9.987,12.959 10.007,13.2 C10.286,16.616 10.539,18.92 10.678,20.09 C10.682,20.125 10.695,20.16 10.715,20.191 C10.735,20.222 10.758,20.241 10.773,20.25 C10.775,20.251 10.777,20.252 10.778,20.253 C10.782,20.251 10.787,20.248 10.793,20.244 C11.035,20.073 11.316,19.902 11.581,19.741 C11.608,19.725 11.634,19.709 11.66,19.693 C11.959,19.511 12.245,19.334 12.504,19.147 C13.051,18.75 13.319,18.415 13.377,18.106 C13.523,17.324 13.737,15.918 13.984,13.194 C14.029,12.695 14.274,12.219 14.684,11.913 C17.107,10.102 18.839,8.106 19.799,6.966 C19.915,6.827 19.967,6.738 19.999,6.662 C20.032,6.581 20.06,6.474 20.086,6.277 C20.19,5.468 20.256,4.942 20.25,4.552 C20.244,4.187 20.174,4.075 20.117,4.012 C20.056,3.944 19.94,3.859 19.556,3.807 C19.153,3.752 18.603,3.75 17.766,3.75 L6.234,3.75 C5.397,3.75 4.847,3.752 4.444,3.807 Z" />
          </svg>
          {{'FILTER' | translate }}
          @if (hasActiveFilters()) {
            <div class="led"></div>
          }
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" class="arrow-icon" [class.rotated]="isFilterOpen">
          <path d="M6.604,8.555 C6.726,8.717 7.09,9.198 7.306,9.476 C7.74,10.032 8.333,10.771 8.973,11.508 C9.616,12.249 10.292,12.97 10.892,13.501 C11.193,13.766 11.457,13.968 11.675,14.1 C11.88,14.223 12.002,14.249 12.002,14.249 C12.002,14.249 12.119,14.223 12.324,14.1 C12.543,13.968 12.807,13.766 13.108,13.501 C13.708,12.97 14.383,12.249 15.026,11.508 C15.666,10.771 16.259,10.032 16.693,9.476 C16.91,9.198 17.273,8.717 17.395,8.556 C17.641,8.222 18.111,8.15 18.445,8.396 C18.778,8.642 18.849,9.111 18.604,9.445 L18.602,9.447 C18.474,9.617 18.097,10.116 17.876,10.399 C17.432,10.968 16.822,11.729 16.159,12.492 C15.5,13.251 14.774,14.03 14.101,14.624 C13.765,14.921 13.425,15.188 13.099,15.384 C12.793,15.569 12.406,15.75 12,15.75 C11.593,15.75 11.206,15.569 10.901,15.384 C10.575,15.188 10.234,14.921 9.899,14.624 C9.226,14.03 8.5,13.251 7.841,12.492 C7.178,11.729 6.568,10.968 6.124,10.399 C5.902,10.115 5.526,9.616 5.398,9.447 L5.396,9.445 C5.151,9.112 5.222,8.642 5.555,8.396 C5.889,8.151 6.358,8.222 6.604,8.555 Z" />
        </svg>
      </button>

      <div class="search-wrapper">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path d="M2.25146 11C2.25146 15.82 6.18146 19.75 11.0015 19.75C13.1411 19.75 15.1053 18.9756 16.6283 17.6927L20.4709 21.5354C20.6209 21.6854 20.8109 21.7553 21.0009 21.7553C21.1909 21.7553 21.381 21.6854 21.531 21.5354C21.821 21.2454 21.821 20.7653 21.531 20.4753L17.6888 16.6331C18.9749 15.1093 19.7515 13.1426 19.7515 11C19.7515 6.18 15.8215 2.25 11.0015 2.25C6.18146 2.25 2.25146 6.18 2.25146 11ZM3.75146 11C3.75146 7 7.00146 3.75 11.0015 3.75C15.0015 3.75 18.2515 7 18.2515 11C18.2515 15 15.0015 18.25 11.0015 18.25C7.00146 18.25 3.75146 15 3.75146 11Z" fill="#141B34" />
        </svg>
        <input type="search" name="search" id="search" formControlName="search" [placeholder]="'SEARCH' | translate" />
      </div>
    </section>

    @if (isFilterOpen) {
      <section class="filter-section">
        <div class="filter-group">
          <h5>{{ 'PARKS' | translate }}</h5>
          @if (parks.length > 0) {
            <div class="tags" formArrayName="parks">
              @for (park of parks; track park.id; let i = $index) {
                <span
                  class="tag"
                  [class.selected]="parksArray.value?.[i]"
                  (click)="toggleChip('parks', i)"
                >
                {{ park.name }}
              </span>
              }
            </div>
          }
        </div>

        <div class="filter-group">
          <h5>{{ 'CATEGORIES' | translate }}</h5>
          @if (categories.length > 0) {
            <div class="tags" formArrayName="categories">
              @for (category of categories; track category.id; let i = $index) {
                <span
                  class="tag"
                  [class.selected]="categoriesArray.value?.[i]"
                  (click)="toggleChip('categories', i)"
                >
                {{ category.name }}
              </span>
              }
            </div>
          }
        </div>

        <div class="filter-group">
          <h5>{{ 'TAGS' | translate }}</h5>
          @if (tags.length > 0) {
            <div class="tags" formArrayName="tags">
              @for (tag of tags; track tag.id; let i = $index) {
                <span
                  class="tag"
                  [class.selected]="tagsArray.value?.[i]"
                  (click)="toggleChip('tags', i)"
                >
                {{ tag.name }}
              </span>
              }
            </div>
          }
        </div>
      </section>
    }
  </form>

  <section class="itinerary-grid">
    @for (interest of interests; track interest.id) {
      <app-card-component [interestDto]="interest"></app-card-component>
    }
    @if (interests.length === 0) {
      <p class="no-results">{{ 'NO_RESULTS' | translate }}</p>
    }
  </section>
</section>

<app-footer-component></app-footer-component>
